# Usage:
# Copy this compose file to your project's directory.
#
# Always run this with the context of the current user:
# docker-compose run --rm -u "$(id -u):$(id -g)" --service-ports kit <commands>
#
version: '2'

services:
    build:
        restart: always
        build: .
        image: cr8ivecodesmith/pykit:2.7
        container_name: py3kit
        volumes:
            - .:/usr/src/project
        working_dir: "/usr/src/project"
    notebook:
        extends:
            service: build
        volumes:
            - .:/usr/src/project
            - ./etc:/etc/jupyter
            - ./share:/usr/share/jupyter
        ports:
            - "8888:8888"
        command: jupyter notebook
    kit:
        extends:
            service: build
        volumes:
            - .:/usr/src/project
        ports:
            - "8888:8888"
            - "8000:8000"
            - "5000:5000"
